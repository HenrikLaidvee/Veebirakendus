{% extends "base.html" %}

{% block title %}Profiil | Seismika{% endblock %}

{% block content %}
<div class="container mt-5">
  <div class="card p-4" id="profile-box" style="max-width: 500px; margin: auto; background-color: #f8f9fa; transition: all 0.3s ease;">
    <h4 class="mb-3">Tere tulemast, {{ session.user.displayName or session.user.email }}!</h4>
    <p><strong>E-mail:</strong> {{ session.user.email }}</p>

    <div class="row mt-3">
      <div class="col-md-6">
        <button class="btn btn-secondary btn-block" onclick="toggleEdit()">Muuda andmeid</button>
      </div>
      <div class="col-md-6">
        <form method="post" action="/logout">
          <button type="submit" class="btn btn-danger btn-block">Logi v√§lja</button>
        </form>
      </div>
    </div>

    <div id="edit-section" style="display: none; margin-top: 20px;">
      <div class="form-group row align-items-center">
        <label class="col-sm-4 col-form-label">Uus e-post</label>
        <div class="col-sm-6">
          <input type="email" id="new-email" class="form-control" placeholder="E-post">
        </div>
        <div class="col-sm-2">
          <button onclick="updateEmail()" class="btn btn-secondary">Uuenda</button>
        </div>
      </div>

      <div class="form-group row align-items-center mt-3">
        <label class="col-sm-4 col-form-label">Uus kasutajanimi</label>
        <div class="col-sm-6">
          <input type="text" id="new-username" class="form-control" placeholder="Kasutajanimi">
        </div>
        <div class="col-sm-2">
          <button onclick="updateUsername()" class="btn btn-secondary">Uuenda</button>
        </div>
      </div>

      <div class="form-group row align-items-center mt-3">
        <label class="col-sm-4 col-form-label">Uus parool</label>
        <div class="col-sm-6">
          <input type="password" id="new-password" class="form-control" placeholder="Parool">
        </div>
        <div class="col-sm-2">

          <button onclick="updatePassword()" class="btn btn-secondary">Uuenda</button>
        </div>
      </div>

      <div id="profile-notification" class="notification-box mt-3"></div>
    </div>
  </div>
</div>

<!-- Firebase + JS -->
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
<script src="/static/scripts/firebase_config.js"></script>
<script src="/static/scripts/profile.js"></script>

{% endblock %}
